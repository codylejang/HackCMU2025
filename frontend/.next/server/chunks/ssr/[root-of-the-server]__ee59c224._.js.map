{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///Users/codylejang/open-notebook/frontend/src/lib/api.ts"],"sourcesContent":["/**\n * API Configuration for Open Notebook Backend\n * This file handles all communication with the Open Notebook API backend\n */\n\n// Backend API configuration\nconst API_BASE_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5055';\n\nexport interface Notebook {\n  id: string;\n  name: string;\n  description?: string;\n  created: string;\n  updated: string;\n}\n\nexport interface Source {\n  id: string;\n  title: string;\n  topics?: string[];\n  asset?: {\n    file_path?: string;\n    url?: string;\n  };\n  full_text?: string;\n  embedded_chunks: number;\n  created: string;\n  updated: string;\n  message?: string;\n}\n\nexport interface Book {\n  id: string;\n  title: string;\n  author?: string;\n  fileType: 'pdf' | 'epub' | 'txt';\n  uploadDate: string;\n  filePath: string;\n  coverPath?: string;\n  fileSize: number;\n  content?: string;\n  currentPage?: number;\n}\n\n/**\n * Ensure a notebook exists before uploading\n * This is the key fix for the 500 error issue\n */\nexport async function ensureNotebookExists(): Promise<string> {\n  try {\n    // First, try to get existing notebooks\n    const response = await fetch(`${API_BASE_URL}/api/notebooks`);\n    const notebooks = await response.json();\n    \n    if (notebooks.length > 0) {\n      // Use the first available notebook\n      console.log('Using existing notebook:', notebooks[0].id);\n      return notebooks[0].id;\n    }\n    \n    // If no notebooks exist, create one automatically\n    console.log('No notebooks found, creating new one...');\n    const createResponse = await fetch(`${API_BASE_URL}/api/notebooks`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        name: 'Book Uploads',\n        description: 'Auto-created notebook for book uploads'\n      })\n    });\n    \n    if (!createResponse.ok) {\n      throw new Error('Failed to create notebook');\n    }\n    \n    const newNotebook = await createResponse.json();\n    console.log('Created new notebook:', newNotebook.id);\n    return newNotebook.id;\n    \n  } catch (error) {\n    console.error('Error ensuring notebook exists:', error);\n    throw new Error('Could not create or find a notebook for book upload');\n  }\n}\n\n/**\n * Upload a book to the Open Notebook backend\n * This replaces the local API call with the backend API\n */\nexport async function uploadBook(file: File, title?: string): Promise<Source> {\n  try {\n    // Ensure we have a valid notebook ID\n    const notebookId = await ensureNotebookExists();\n    \n    // Create form data\n    const formData = new FormData();\n    formData.append('notebook_id', notebookId);\n    formData.append('file', file);\n    \n    if (title) {\n      formData.append('title', title);\n    }\n    \n    // Upload the book to the backend\n    const response = await fetch(`${API_BASE_URL}/api/sources`, {\n      method: 'POST',\n      body: formData\n    });\n    \n    if (!response.ok) {\n      const errorData = await response.json();\n      throw new Error(errorData.detail || 'Failed to upload book');\n    }\n    \n    const result = await response.json();\n    console.log('Book uploaded successfully:', result);\n    return result;\n    \n  } catch (error) {\n    console.error('Error uploading book:', error);\n    throw error;\n  }\n}\n\n/**\n * Get all notebooks from the backend\n */\nexport async function getNotebooks(): Promise<Notebook[]> {\n  try {\n    const response = await fetch(`${API_BASE_URL}/api/notebooks`);\n    if (!response.ok) {\n      throw new Error('Failed to fetch notebooks');\n    }\n    return await response.json();\n  } catch (error) {\n    console.error('Error fetching notebooks:', error);\n    throw error;\n  }\n}\n\n/**\n * Create a new notebook\n */\nexport async function createNotebook(name: string, description?: string): Promise<Notebook> {\n  try {\n    const response = await fetch(`${API_BASE_URL}/api/notebooks`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        name,\n        description\n      })\n    });\n    \n    if (!response.ok) {\n      throw new Error('Failed to create notebook');\n    }\n    \n    return await response.json();\n  } catch (error) {\n    console.error('Error creating notebook:', error);\n    throw error;\n  }\n}\n\n/**\n * Get all sources/books from a notebook\n */\nexport async function getSources(notebookId: string): Promise<Source[]> {\n  try {\n    const response = await fetch(`${API_BASE_URL}/api/sources?notebook_id=${notebookId}`);\n    if (!response.ok) {\n      throw new Error('Failed to fetch sources');\n    }\n    return await response.json();\n  } catch (error) {\n    console.error('Error fetching sources:', error);\n    throw error;\n  }\n}\n\n/**\n * Convert Source from backend to Book format for frontend compatibility\n */\nexport function sourceToBook(source: Source): Book {\n  return {\n    id: source.id,\n    title: source.title,\n    author: 'Unknown', // Backend doesn't have author field\n    fileType: 'txt', // Default, could be determined from file_path\n    uploadDate: source.created,\n    filePath: source.asset?.file_path || '',\n    coverPath: '', // Backend doesn't generate covers\n    fileSize: 0, // Backend doesn't track file size\n    content: source.full_text || '',\n    currentPage: 1\n  };\n}\n\n/**\n * Health check for the backend API\n */\nexport async function healthCheck(): Promise<boolean> {\n  try {\n    const response = await fetch(`${API_BASE_URL}/health`);\n    return response.ok;\n  } catch (error) {\n    console.error('Backend health check failed:', error);\n    return false;\n  }\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 182, "column": 0}, "map": {"version":3,"sources":["file:///Users/codylejang/open-notebook/frontend/src/app/page-backend.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useRef, useEffect } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { Upload, BookOpen, Plus, FileText, Settings, MessageCircle, X, Trash2, User, AlertCircle } from 'lucide-react';\nimport Link from 'next/link';\nimport Image from 'next/image';\nimport { uploadBook, getNotebooks, getSources, sourceToBook, healthCheck, type Book, type Notebook } from '@/lib/api';\n\nexport default function HomeBackend() {\n  const [books, setBooks] = useState<Book[]>([]);\n  const [notebooks, setNotebooks] = useState<Notebook[]>([]);\n  const [isUploading, setIsUploading] = useState(false);\n  const [isDeleting, setIsDeleting] = useState<string | null>(null);\n  const [backendStatus, setBackendStatus] = useState<'checking' | 'connected' | 'disconnected'>('checking');\n  const [error, setError] = useState<string | null>(null);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  // Load data from backend on component mount\n  useEffect(() => {\n    loadData();\n  }, []);\n\n  const loadData = async () => {\n    try {\n      // Check backend health first\n      const isHealthy = await healthCheck();\n      if (!isHealthy) {\n        setBackendStatus('disconnected');\n        setError('Backend API is not available. Please start the backend server.');\n        return;\n      }\n      \n      setBackendStatus('connected');\n      setError(null);\n      \n      // Load notebooks and sources\n      const notebooksData = await getNotebooks();\n      setNotebooks(notebooksData);\n      \n      // Load sources from all notebooks\n      const allBooks: Book[] = [];\n      for (const notebook of notebooksData) {\n        try {\n          const sources = await getSources(notebook.id);\n          const notebookBooks = sources.map(sourceToBook);\n          allBooks.push(...notebookBooks);\n        } catch (error) {\n          console.error(`Error loading sources from notebook ${notebook.id}:`, error);\n        }\n      }\n      \n      setBooks(allBooks);\n    } catch (error) {\n      console.error('Error loading data:', error);\n      setBackendStatus('disconnected');\n      setError('Failed to connect to backend API. Please check if the server is running.');\n    }\n  };\n\n  const handleFileUpload = async (event: React.ChangeEvent<HTMLInputElement>) => {\n    const files = event.target.files;\n    if (!files) return;\n\n    setIsUploading(true);\n    setError(null);\n    \n    try {\n      for (const file of Array.from(files)) {\n        const fileType = file.name.split('.').pop()?.toLowerCase() as 'pdf' | 'epub' | 'txt';\n        \n        if (['pdf', 'epub', 'txt'].includes(fileType)) {\n          // Use the backend API to upload\n          const result = await uploadBook(file, file.name.replace(/\\.[^/.]+$/, \"\"));\n          \n          // Convert to Book format and add to state\n          const newBook = sourceToBook(result);\n          setBooks(prev => [newBook, ...prev]);\n          \n          // Reload notebooks to get updated data\n          const notebooksData = await getNotebooks();\n          setNotebooks(notebooksData);\n          \n        } else {\n          alert(`Unsupported file type: ${fileType}`);\n        }\n      }\n    } catch (error) {\n      console.error('Error uploading files:', error);\n      setError(`Error uploading files: ${error instanceof Error ? error.message : 'Unknown error'}`);\n    }\n    \n    setIsUploading(false);\n    if (fileInputRef.current) {\n      fileInputRef.current.value = '';\n    }\n  };\n\n  const handleDeleteBook = async (bookId: string) => {\n    if (!confirm('Are you sure you want to delete this book?')) {\n      return;\n    }\n\n    setIsDeleting(bookId);\n    \n    try {\n      // Note: The backend doesn't have a delete endpoint yet\n      // For now, just remove from local state\n      setBooks(prev => prev.filter(book => book.id !== bookId));\n      alert('Book deleted from local view. Backend delete functionality not yet implemented.');\n    } catch (error) {\n      console.error('Error deleting book:', error);\n      setError(`Error deleting book: ${error instanceof Error ? error.message : 'Unknown error'}`);\n    } finally {\n      setIsDeleting(null);\n    }\n  };\n\n  const getFileIcon = (fileType: string) => {\n    switch (fileType) {\n      case 'pdf':\n        return 'ðŸ“„';\n      case 'epub':\n        return 'ðŸ“š';\n      case 'txt':\n        return 'ðŸ“';\n      default:\n        return 'ðŸ“–';\n    }\n  };\n\n  const getBackendStatusColor = () => {\n    switch (backendStatus) {\n      case 'connected':\n        return 'text-green-600';\n      case 'disconnected':\n        return 'text-red-600';\n      case 'checking':\n        return 'text-yellow-600';\n    }\n  };\n\n  const getBackendStatusText = () => {\n    switch (backendStatus) {\n      case 'connected':\n        return 'Backend Connected';\n      case 'disconnected':\n        return 'Backend Disconnected';\n      case 'checking':\n        return 'Checking Backend...';\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-amber-50 to-orange-100\">\n      {/* Header */}\n      <header className=\"bg-white/80 backdrop-blur-sm border-b border-amber-200\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"flex justify-between items-center h-16\">\n            <div className=\"flex items-center space-x-3\">\n              <BookOpen className=\"h-8 w-8 text-amber-600\" />\n              <h1 className=\"text-2xl font-bold text-gray-900\">E-Book Reader</h1>\n              <span className=\"text-sm text-gray-500\">(Backend Connected)</span>\n            </div>\n            <div className=\"flex items-center space-x-4\">\n              <div className={`flex items-center space-x-2 ${getBackendStatusColor()}`}>\n                <div className={`w-2 h-2 rounded-full ${\n                  backendStatus === 'connected' ? 'bg-green-500' : \n                  backendStatus === 'disconnected' ? 'bg-red-500' : 'bg-yellow-500'\n                }`}></div>\n                <span className=\"text-sm font-medium\">{getBackendStatusText()}</span>\n              </div>\n              <Settings className=\"h-6 w-6 text-gray-600 hover:text-gray-900 cursor-pointer\" />\n            </div>\n          </div>\n        </div>\n      </header>\n\n      {/* Error Banner */}\n      {error && (\n        <div className=\"bg-red-50 border-l-4 border-red-400 p-4\">\n          <div className=\"flex\">\n            <div className=\"flex-shrink-0\">\n              <AlertCircle className=\"h-5 w-5 text-red-400\" />\n            </div>\n            <div className=\"ml-3\">\n              <p className=\"text-sm text-red-700\">{error}</p>\n              <button\n                onClick={loadData}\n                className=\"mt-2 text-sm text-red-600 hover:text-red-500 underline\"\n              >\n                Retry Connection\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Main Content */}\n      <main className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        \n        {/* Backend Info */}\n        {backendStatus === 'connected' && (\n          <div className=\"mb-6 p-4 bg-green-50 border border-green-200 rounded-lg\">\n            <div className=\"flex items-center\">\n              <div className=\"flex-shrink-0\">\n                <div className=\"w-2 h-2 bg-green-500 rounded-full\"></div>\n              </div>\n              <div className=\"ml-3\">\n                <p className=\"text-sm text-green-700\">\n                  Connected to Open Notebook Backend API. \n                  {notebooks.length > 0 && ` Found ${notebooks.length} notebook(s).`}\n                </p>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Books Grid */}\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6\">\n          {/* Add New Book Card */}\n          <motion.div\n            whileHover={{ scale: 1.02 }}\n            whileTap={{ scale: 0.98 }}\n            onClick={() => backendStatus === 'connected' ? fileInputRef.current?.click() : null}\n            className={`bg-white rounded-xl shadow-lg p-6 border-2 border-dashed transition-colors group ${\n              backendStatus === 'connected' \n                ? 'border-amber-300 hover:border-amber-400 cursor-pointer' \n                : 'border-gray-300 cursor-not-allowed opacity-50'\n            }`}\n          >\n            <div className=\"flex flex-col items-center justify-center h-64 text-center\">\n              <div className={`w-16 h-16 rounded-full flex items-center justify-center mb-4 transition-colors ${\n                backendStatus === 'connected' \n                  ? 'bg-amber-100 group-hover:bg-amber-200' \n                  : 'bg-gray-100'\n              }`}>\n                {isUploading ? (\n                  <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-amber-600\"></div>\n                ) : (\n                  <Plus className={`h-8 w-8 ${\n                    backendStatus === 'connected' ? 'text-amber-600' : 'text-gray-400'\n                  }`} />\n                )}\n              </div>\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">\n                {isUploading ? 'Uploading...' : 'Add New Book'}\n              </h3>\n              <p className=\"text-gray-600 text-sm\">\n                {backendStatus === 'connected' \n                  ? 'Click to upload PDF, EPUB, or TXT files' \n                  : 'Connect to backend to upload files'\n                }\n              </p>\n            </div>\n            <input\n              ref={fileInputRef}\n              type=\"file\"\n              multiple\n              accept=\".pdf,.epub,.txt\"\n              onChange={handleFileUpload}\n              className=\"hidden\"\n              disabled={backendStatus !== 'connected'}\n            />\n          </motion.div>\n\n          {/* Existing Books */}\n          <AnimatePresence>\n            {books.map((book) => (\n              <motion.div\n                key={book.id}\n                initial={{ opacity: 0, scale: 0.8 }}\n                animate={{ opacity: 1, scale: 1 }}\n                exit={{ opacity: 0, scale: 0.8 }}\n                whileHover={{ scale: 1.02 }}\n                className=\"bg-white rounded-xl shadow-lg overflow-hidden border border-amber-200 hover:shadow-xl transition-shadow relative group\"\n              >\n                {/* Delete Button */}\n                <motion.button\n                  whileHover={{ scale: 1.1 }}\n                  whileTap={{ scale: 0.9 }}\n                  onClick={(e) => {\n                    e.preventDefault();\n                    handleDeleteBook(book.id);\n                  }}\n                  disabled={isDeleting === book.id}\n                  className=\"absolute top-2 right-2 z-10 p-2 bg-red-500 hover:bg-red-600 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity disabled:opacity-50\"\n                >\n                  {isDeleting === book.id ? (\n                    <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white\"></div>\n                  ) : (\n                    <Trash2 className=\"h-4 w-4\" />\n                  )}\n                </motion.button>\n\n                <Link href={`/reader/${book.id}`}>\n                  <div className=\"p-6\">\n                    {/* Book Cover */}\n                    <div className=\"w-full h-48 bg-gradient-to-br from-amber-100 to-orange-200 rounded-lg flex items-center justify-center mb-4 overflow-hidden\">\n                      {book.coverPath ? (\n                        <Image\n                          src={`/api/covers/${book.coverPath.split('/').pop()}`}\n                          alt={book.title}\n                          width={200}\n                          height={200}\n                          className=\"object-cover w-full h-full\"\n                          unoptimized\n                        />\n                      ) : (\n                        <div className=\"text-6xl\">{getFileIcon(book.fileType)}</div>\n                      )}\n                    </div>\n                    \n                    {/* Book Info */}\n                    <div className=\"space-y-2\">\n                      <h3 className=\"font-semibold text-gray-900 text-lg line-clamp-2\">\n                        {book.title}\n                      </h3>\n                      {book.author && book.author !== 'Unknown' && (\n                        <div className=\"flex items-center text-gray-600 text-sm\">\n                          <User className=\"h-4 w-4 mr-1\" />\n                          <span className=\"line-clamp-1\">{book.author}</span>\n                        </div>\n                      )}\n                      <div className=\"flex items-center justify-between text-sm text-gray-500\">\n                        <span className=\"uppercase font-medium\">{book.fileType}</span>\n                        <span>{new Date(book.uploadDate).toLocaleDateString()}</span>\n                      </div>\n                      <div className=\"text-xs text-gray-400\">\n                        {book.fileSize > 0 ? `${(book.fileSize / 1024 / 1024).toFixed(1)} MB` : 'Size unknown'}\n                      </div>\n                    </div>\n                  </div>\n                </Link>\n              </motion.div>\n            ))}\n          </AnimatePresence>\n        </div>\n\n        {/* Empty State */}\n        {books.length === 0 && backendStatus === 'connected' && (\n          <motion.div\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            className=\"text-center py-16\"\n          >\n            <BookOpen className=\"h-16 w-16 text-gray-400 mx-auto mb-4\" />\n            <h3 className=\"text-xl font-semibold text-gray-900 mb-2\">No books yet</h3>\n            <p className=\"text-gray-600\">Upload your first e-book to get started</p>\n          </motion.div>\n        )}\n\n        {/* Backend Disconnected State */}\n        {backendStatus === 'disconnected' && (\n          <motion.div\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            className=\"text-center py-16\"\n          >\n            <AlertCircle className=\"h-16 w-16 text-red-400 mx-auto mb-4\" />\n            <h3 className=\"text-xl font-semibold text-gray-900 mb-2\">Backend Not Connected</h3>\n            <p className=\"text-gray-600 mb-4\">Please start the Open Notebook backend server</p>\n            <button\n              onClick={loadData}\n              className=\"px-4 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-700 transition-colors\"\n            >\n              Retry Connection\n            </button>\n          </motion.div>\n        )}\n      </main>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}