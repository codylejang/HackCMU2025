{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///Users/atlantix/Desktop/ent/LLMBookReader/HackCMU2025/frontend/src/app/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useRef, useEffect } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { Upload, BookOpen, Plus, FileText, Settings, MessageCircle, X, Trash2, User } from 'lucide-react';\nimport Link from 'next/link';\nimport Image from 'next/image';\n\ninterface Book {\n  id: string;\n  title: string;\n  author?: string;\n  fileType: 'pdf' | 'epub' | 'txt';\n  uploadDate: string;\n  filePath: string;\n  coverPath?: string;\n  fileSize: number;\n  content?: string;\n}\n\nexport default function Home() {\n  const [books, setBooks] = useState<Book[]>([]);\n  const [isUploading, setIsUploading] = useState(false);\n  const [isDeleting, setIsDeleting] = useState<string | null>(null);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  // Load books from API on component mount\n  useEffect(() => {\n    loadBooks();\n  }, []);\n\n  const loadBooks = async () => {\n    try {\n      const response = await fetch('/api/books');\n      const data = await response.json();\n      if (data.success) {\n        setBooks(data.data);\n      }\n    } catch (error) {\n      console.error('Error loading books:', error);\n    }\n  };\n\n  const handleFileUpload = async (event: React.ChangeEvent<HTMLInputElement>) => {\n    const files = event.target.files;\n    if (!files) return;\n\n    setIsUploading(true);\n    \n    try {\n      for (const file of Array.from(files)) {\n        const fileType = file.name.split('.').pop()?.toLowerCase() as 'pdf' | 'epub' | 'txt';\n        \n        if (['pdf', 'epub', 'txt'].includes(fileType)) {\n          const formData = new FormData();\n          formData.append('file', file);\n          formData.append('author', 'Unknown');\n\n          const response = await fetch('/api/books', {\n            method: 'POST',\n            body: formData,\n          });\n\n          const data = await response.json();\n          if (data.success) {\n            setBooks(prev => [data.data, ...prev]);\n          } else {\n            alert(`Error uploading ${file.name}: ${data.error}`);\n          }\n        } else {\n          alert(`Unsupported file type: ${fileType}`);\n        }\n      }\n    } catch (error) {\n      console.error('Error uploading files:', error);\n      alert('Error uploading files. Please try again.');\n    }\n    \n    setIsUploading(false);\n    if (fileInputRef.current) {\n      fileInputRef.current.value = '';\n    }\n  };\n\n  const handleDeleteBook = async (bookId: string) => {\n    if (!confirm('Are you sure you want to delete this book?')) {\n      return;\n    }\n\n    setIsDeleting(bookId);\n    \n    try {\n      const response = await fetch(`/api/books?id=${bookId}`, {\n        method: 'DELETE',\n      });\n\n      const data = await response.json();\n      if (data.success) {\n        setBooks(prev => prev.filter(book => book.id !== bookId));\n      } else {\n        alert(`Error deleting book: ${data.error}`);\n      }\n    } catch (error) {\n      console.error('Error deleting book:', error);\n      alert('Error deleting book. Please try again.');\n    } finally {\n      setIsDeleting(null);\n    }\n  };\n\n  const getFileIcon = (fileType: string) => {\n    switch (fileType) {\n      case 'pdf':\n        return 'üìÑ';\n      case 'epub':\n        return 'üìö';\n      case 'txt':\n        return 'üìù';\n      default:\n        return 'üìñ';\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-amber-50 to-orange-100\">\n      {/* Header */}\n      <header className=\"bg-white/80 backdrop-blur-sm border-b border-amber-200\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"flex justify-between items-center h-16\">\n            <div className=\"flex items-center space-x-3\">\n              <BookOpen className=\"h-8 w-8 text-amber-600\" />\n              <h1 className=\"text-2xl font-bold text-gray-900\">E-Book Reader</h1>\n            </div>\n            <div className=\"flex items-center space-x-4\">\n              <Settings className=\"h-6 w-6 text-gray-600 hover:text-gray-900 cursor-pointer\" />\n            </div>\n          </div>\n        </div>\n      </header>\n\n      {/* Main Content */}\n      <main className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n\n        {/* Books Grid */}\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6\">\n          {/* Add New Book Card */}\n          <motion.div\n            whileHover={{ scale: 1.02 }}\n            whileTap={{ scale: 0.98 }}\n            onClick={() => fileInputRef.current?.click()}\n            className=\"bg-white rounded-xl shadow-lg p-6 border-2 border-dashed border-amber-300 hover:border-amber-400 cursor-pointer transition-colors group\"\n          >\n            <div className=\"flex flex-col items-center justify-center h-64 text-center\">\n              <div className=\"w-16 h-16 bg-amber-100 rounded-full flex items-center justify-center mb-4 group-hover:bg-amber-200 transition-colors\">\n                {isUploading ? (\n                  <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-amber-600\"></div>\n                ) : (\n                  <Plus className=\"h-8 w-8 text-amber-600\" />\n                )}\n              </div>\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">\n                {isUploading ? 'Uploading...' : 'Add New Book'}\n              </h3>\n              <p className=\"text-gray-600 text-sm\">Click to upload PDF, EPUB, or TXT files</p>\n            </div>\n            <input\n              ref={fileInputRef}\n              type=\"file\"\n              multiple\n              accept=\".pdf,.epub,.txt\"\n              onChange={handleFileUpload}\n              className=\"hidden\"\n            />\n          </motion.div>\n\n          {/* Existing Books */}\n          <AnimatePresence>\n            {books.map((book) => (\n              <motion.div\n                key={book.id}\n                initial={{ opacity: 0, scale: 0.8 }}\n                animate={{ opacity: 1, scale: 1 }}\n                exit={{ opacity: 0, scale: 0.8 }}\n                whileHover={{ scale: 1.02 }}\n                className=\"bg-white rounded-xl shadow-lg overflow-hidden border border-amber-200 hover:shadow-xl transition-shadow relative group\"\n              >\n                {/* Delete Button */}\n                <motion.button\n                  whileHover={{ scale: 1.1 }}\n                  whileTap={{ scale: 0.9 }}\n                  onClick={(e) => {\n                    e.preventDefault();\n                    handleDeleteBook(book.id);\n                  }}\n                  disabled={isDeleting === book.id}\n                  className=\"absolute top-2 right-2 z-10 p-2 bg-red-500 hover:bg-red-600 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity disabled:opacity-50\"\n                >\n                  {isDeleting === book.id ? (\n                    <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white\"></div>\n                  ) : (\n                    <Trash2 className=\"h-4 w-4\" />\n                  )}\n                </motion.button>\n\n                <Link href={`/reader/${book.id}`}>\n                  <div className=\"p-6\">\n                    {/* Book Cover */}\n                    <div className=\"w-full h-48 bg-gradient-to-br from-amber-100 to-orange-200 rounded-lg flex items-center justify-center mb-4 overflow-hidden\">\n                      {book.coverPath ? (\n                        <Image\n                          src={`/api/covers/${book.coverPath.split('/').pop()}`}\n                          alt={book.title}\n                          width={200}\n                          height={200}\n                          className=\"object-cover w-full h-full\"\n                          unoptimized\n                        />\n                      ) : (\n                        <div className=\"text-6xl\">{getFileIcon(book.fileType)}</div>\n                      )}\n                    </div>\n                    \n                    {/* Book Info */}\n                    <div className=\"space-y-2\">\n                      <h3 className=\"font-semibold text-gray-900 text-lg line-clamp-2\">\n                        {book.title}\n                      </h3>\n                      {book.author && book.author !== 'Unknown' && (\n                        <div className=\"flex items-center text-gray-600 text-sm\">\n                          <User className=\"h-4 w-4 mr-1\" />\n                          <span className=\"line-clamp-1\">{book.author}</span>\n                        </div>\n                      )}\n                      <div className=\"flex items-center justify-between text-sm text-gray-500\">\n                        <span className=\"uppercase font-medium\">{book.fileType}</span>\n                        <span>{new Date(book.uploadDate).toLocaleDateString()}</span>\n                      </div>\n                      <div className=\"text-xs text-gray-400\">\n                        {(book.fileSize / 1024 / 1024).toFixed(1)} MB\n                      </div>\n                    </div>\n                  </div>\n                </Link>\n              </motion.div>\n            ))}\n          </AnimatePresence>\n        </div>\n\n        {/* Empty State */}\n        {books.length === 0 && (\n          <motion.div\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            className=\"text-center py-16\"\n          >\n            <BookOpen className=\"h-16 w-16 text-gray-400 mx-auto mb-4\" />\n            <h3 className=\"text-xl font-semibold text-gray-900 mb-2\">No books yet</h3>\n            <p className=\"text-gray-600\">Upload your first e-book to get started</p>\n          </motion.div>\n        )}\n      </main>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}